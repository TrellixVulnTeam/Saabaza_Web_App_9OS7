#!/bin/bash

APPSAABAZA_GUNICORN_MAX_REQUESTS=${APPSAABAZA_GUNICORN_MAX_REQUESTS:-500}
APPSAABAZA_GUNICORN_MAX_REQUESTS_JITTERS=${APPSAABAZA_GUNICORN_MAX_REQUESTS_JITTERS:-50}
APPSAABAZA_GUNICORN_WORKER_CLASS=${APPSAABAZA_GUNICORN_WORKER_CLASS:-sync}

su appsaabaza -c "${APPSAABAZA_PYTHON_BIN_DIR}gunicorn -w ${APPSAABAZA_GUNICORN_WORKERS} ${APPSAABAZA_GUNICORN_TEMPORARY_DIRECTORY} appsaabaza.wsgi --max-requests ${APPSAABAZA_GUNICORN_MAX_REQUESTS} --max-requests-jitter ${APPSAABAZA_GUNICORN_MAX_REQUESTS_JITTERS} --worker-class ${APPSAABAZA_GUNICORN_WORKER_CLASS} --bind 0.0.0.0:8000 --timeout ${APPSAABAZA_GUNICORN_TIMEOUT}"
